


{% extends "base.html" %}

{% block title %}Code Ko Samjho, Coding Mein Jeeto{% endblock %}

{% block content %}


    <section class="hero-section d-flex align-items-center justify-content-center text-center" id="decode-section">
        <div class="container">
            <h1 class="display-3 animate__animated animate__fadeInDown">Code Ko Samjho, Coding Mein Jeeto â€” Your AI Code Buddy!</h1>
            <p class="lead animate__animated animate__fadeInUp animate__delay-0.5s">Unlock complex code with simple explanations, powerful mnemonics, and core concepts. Learn smarter, not harder.</p>

            <div class="code-input-area animate__animated animate__zoomIn animate__delay-1s">
                <form id="code-form" method="POST">
                    <div class="hero-input-group flex-column">
                        <textarea class="form-control mb-3" id="user_code" name="user_code" rows="12" placeholder="Paste your Python, JavaScript, Java, C++ or any other code here to get instant insights..." required></textarea>

                        {# START: Added Output Tone Selection #}
                        <div class="mb-4 text-start"> {# Increased bottom margin #}
                            <label for="outputTone" class="form-label text-white fw-bold">Choose Output Tone:</label>
                            <select class="form-select custom-select-tone" id="outputTone" name="output_tone">
                                <option value="friendly_buddy">1. Friendly Buddy (Bhai-type explanations, common language, jokes)</option>
                                <option value="professional_teacher">2. Professional Teacher (Structured, real-life examples, encouraging)</option>
                                <option value="fast_precise">3. Fast & Precise Learning (Concise, bullet points, direct to the point)</option>
                            </select>
                        </div>
                        {# END: Added Output Tone Selection #}
                        
                        {# Removed the <a> tag wrapping the button as it interfered with form submission #}
                        <button type="submit" class="btn btn-decode"> Analyze Code <i class="fas fa-arrow-right ms-2"></i></button>
                    </div>
                </form>
                <div id="loading-spinner" class="mt-4 text-center d-none">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2 text-white">Analyzing your code, please wait...</p>
                </div>
            </div>
        </div>
    </section>

    <section class="how-it-works-section py-5" id="how-it-works-section">
        <div class="container">
            <h2 class="text-center mb-5 animate__animated animate__fadeIn">How It Works: Simple Steps to Code Mastery</h2>
            <div class="row text-center">
                <div class="col-md-4 mb-4 animate__animated animate__fadeInLeft animate__delay-0.5s">
                    <div class="step-card">
                        <div class="step-icon"><i class="fas fa-paste"></i></div>
                        <h3>1. Paste Your Code</h3>
                        <p>Simply copy and paste any code snippet into the editor above. We support multiple programming languages.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4 animate__animated animate__fadeInUp animate__delay-0.8s">
                    <div class="step-card">
                        <div class="step-icon"><i class="fas fa-cogs"></i></div>
                        <h3>2. Get Instant Analysis</h3>
                        <p>Our AI processes your code, breaking down its logic and purpose in seconds.</p>
                    </div>
                </div>
                <div class="col-md-4 mb-4 animate__animated animate__fadeInRight animate__delay-1.1s">
                    <div class="step-card">
                        <div class="step-icon"><i class="fas fa-graduation-cap"></i></div>
                        <h3>3. Learn & Master</h3>
                        <p>Receive clear explanations, memory aids, and focus on the 20% core concepts for 80% understanding.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="features-section py-5" id="features-section">
        <div class="container">
            <h2 class="text-center mb-5 animate__animated animate__fadeIn">Why Code Sarthi Code Buddy? Your Learning Advantage.</h2>
            <div class="row">
                <div class="col-md-6 col-lg-3 d-flex mb-4 animate__animated animate__fadeInLeft animate__delay-0.5s">
                    <div class="feature-card">
                        <i class="fas fa-lightbulb icon"></i>
                        <h3>Deep Concept Clarity</h3>
                        <p>Go beyond syntax. Understand the 'why, what, how, and where' of your code with simple, easy-to-grasp explanations.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 d-flex mb-4 animate__animated animate__fadeInUp animate__delay-0.8s">
                    <div class="feature-card">
                        <i class="fas fa-brain icon"></i>
                        <h3>Effective Memory Mnemonics</h3>
                        <p>Boost your retention! Get creative memory aids and tricks tailored to help you recall complex coding patterns and syntax effortlessly.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 d-flex mb-4 animate__animated animate__fadeInDown animate__delay-1.1s">
                    <div class="feature-card">
                        <i class="fas fa-code-branch icon"></i>
                        <h3>80/20 Rule Applied</h3>
                        <p>Focus on what matters. Identify the essential 20% of your code's concepts that unlock understanding of the remaining 80%.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 d-flex mb-4 animate__animated animate__fadeInRight animate__delay-1.4s">
                    <div class="feature-card">
                        <i class="fas fa-book-reader icon"></i>
                        <h3>Accelerated Learning</h3>
                        <p>Transform your learning curve. Get immediate, actionable insights into any code snippet, turning confusion into clarity instantly.</p>
                    </div
                </div>
            </div>
        </div>
    </section>

    {# Start: Results Display Section (Initially hidden) #}
    <section class="results-display-section py-5 d-none" id="results-display-section">
        <div class="container">
            <h2 class="text-center mb-5 animate__animated animate__fadeIn">Your Code Analysis: Deeper Understanding</h2>
            <div id="analysis-results-container" class="mt-4 animate__animated animate__fadeInUp">
                {# Concept Explanation - Immersive Display #}
                <div class="analysis-card-premium mb-4 concept-explanation-immersive">
                    <div class="card-header">
                        <h3><i class="fas fa-info-circle me-3"></i>Concept Explanation</h3>
                    </div>
                    <div class="card-body concept-stepper-container">
                        <div class="concept-display-area">
                            {# Each concept step will be dynamically loaded here by JS #}
                            {# Initial content will be populated by script.js after analysis #}
                            <div class="concept-step" id="concept-step-why">
                                <div class="concept-header">
                                    <i class="fas fa-question-circle"></i> <strong>WHY THIS CODE?</strong>
                                </div>
                                <div class="concept-content" id="concept-why-content"></div>
                            </div>
                            <div class="concept-step d-none" id="concept-step-how">
                                <div class="concept-header">
                                    <i class="fas fa-cogs"></i> <strong>HOW DOES IT WORK?</strong>
                                </div>
                                <div class="concept-content" id="concept-how-content"></div>
                            </div>
                            <div class="concept-step d-none" id="concept-step-where">
                                <div class="concept-header">
                                    <i class="fas fa-map-marker-alt"></i> <strong>WHERE IT IS USED ?</strong>
                                </div>
                                <div class="concept-content" id="concept-where-content"></div>
                            </div>
                        </div>

                        <!-- Navigation Buttons and Pagination Dots -->
                        <div class="concept-navigation-controls d-flex flex-column align-items-center mt-4">
                            <div class="pagination-dots mb-3">
                                <span class="dot active" data-step="0"></span>
                                <span class="dot" data-step="1"></span>
                                <span class="dot" data-step="2"></span>
                            </div>
                            <div class="d-flex justify-content-between w-100 px-4">
                                <button class="btn btn-secondary concept-nav-btn" id="prev-concept-btn" disabled><i class="fas fa-arrow-left me-2"></i>Back</button>
                                <button class="btn btn-primary concept-nav-btn" id="next-concept-btn">Next<i class="fas fa-arrow-right ms-2"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        {# Memory Mnemonics Card #}
                        <div class="analysis-card-premium mb-4">
                            <div class="card-header">
                                <h3><i class="fas fa-brain me-3"></i>Memory Mnemonics</h3>
                            </div>
                            <div class="card-body">
                                <ul id="mnemonics-list"></ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        {# Core 20% Concepts Card #}
                        <div class="analysis-card-premium mb-4">
                            <div class="card-header">
                                <h3><i class="fas fa-code-branch me-3"></i>Core 20% Concepts</h3>
                            </div>
                            <div class="card-body">
                                <ul id="core-concepts-list"></ul>
                            </div>
                        </div>
                    </div>
                </div>

                {# Action Buttons for PDF download, Start AI Tutor, and Analyze New Code #}
                <div class="text-center mt-4 mb-5">
                    <button class="btn btn-decode me-3" id="download-analysis-pdf">
                        <i class="fas fa-file-pdf me-2"></i> Download PDF
                    </button>
                    <!-- NEW BUTTON FOR AI TUTOR -->
                    <a href="{{ url_for('tutor_page') }}" class="btn btn-secondary btn-decode me-3">
                        <i class="fas fa-robot me-2"></i> Start AI Tutor
                    </a>
                    <a href="{{ url_for('home') }}" class="btn btn-secondary btn-decode">
                        <i class="fas fa-redo me-2"></i> Analyze New Code
                    </a>
                </div>
            </div>
        </div>
    </section>
    {# End: Results Display Section #}

{% endblock %}
